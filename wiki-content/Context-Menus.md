# Context Menus

Canvas Roots adds context menu actions throughout Obsidian. Right-click on files, folders, and canvases to access quick actions without opening the Control Center.

## Person Notes

Right-click on any markdown file with a `cr_id` frontmatter property:

| Action | Description |
|--------|-------------|
| **Generate tree** | |
| → Generate Canvas tree | Create a family tree canvas with this person as root |
| → Generate Excalidraw tree | Create an Excalidraw drawing with this person as root |
| **Edit person** | Open the person editing modal |
| **Add relationship...** | |
| → Add parent | Add a father or mother relationship |
| → Add spouse | Add a spouse relationship |
| → Add child | Add a child relationship |
| **Validate relationships** | Check for relationship inconsistencies |
| **Find on canvas** | Locate this person on an open canvas |
| **Open in map view** | Show this person's locations on the map |
| **Calculate relationship...** | Find how this person relates to another |
| **Set group name** | Assign a custom name to this person's family group |
| **Set collection** | Add this person to a collection |
| **Add source...** | Add a source citation to this person |
| **Events** | |
| → Create event for this person | Open Create Event modal with person pre-filled |
| → Export timeline to Canvas | Export all events for this person to a Canvas file |
| → Export timeline to Excalidraw | Export all events for this person to an Excalidraw file |
| **Mark as root person** | Designate as a tree root (toggles to "Unmark" if already set) |
| **Assign reference numbers** | |
| → Ahnentafel (ancestors) | Assign ancestor numbering from this person |
| → d'Aboville (descendants) | Assign descendant numbering with dots |
| → Henry (descendants) | Assign compact descendant numbering |
| → Generation (all relatives) | Assign generation depth numbers |
| **Assign lineage** | |
| → All descendants | Mark all descendants with a lineage tag |
| → Patrilineal (father's line) | Mark descendants through male line only |
| → Matrilineal (mother's line) | Mark descendants through female line only |
| **Create place notes...** | Create notes for places mentioned in this person's data |
| **Add essential properties** | |
| → Add essential person properties | Add missing cr_id, name, born, died, etc. |
| → Add essential place properties | Convert to a place note with required fields |
| **More options...** | Open the Control Center |

## Place Notes

Right-click on markdown files with `type: place` in frontmatter:

| Action | Description |
|--------|-------------|
| **Set collection** | Add this place to a collection |
| **Open in map view** | Show this place on the map |
| **Edit place** | Open the place editing modal |
| **Add essential properties** | Add missing place properties |

## Map Notes

Right-click on markdown files with `type: map` in frontmatter:

| Action | Description |
|--------|-------------|
| **Open in map view** | Open this custom map in the Map View |
| **Add essential map properties** | Add missing map configuration properties |

## Canvas Files

Right-click on `.canvas` files generated by Canvas Roots:

| Action | Description |
|--------|-------------|
| **Regenerate canvas** | Update the tree with current data |
| **Show tree statistics** | Display information about the tree |
| **Customize canvas styles** | Open styling options |
| **Open in family chart** | View in the interactive Family Chart |
| **Export** | |
| → Export to Excalidraw | Convert to Excalidraw for annotation |
| → Export as PNG | Save as high-resolution image |
| → Export as SVG | Save as vector graphic |
| → Export as PDF | Save as PDF document |
| **Split canvas wizard** | Plan how to split large trees |
| **More options...** | Open the Control Center |

## Folders

Right-click on folders in the file explorer:

| Action | Description |
|--------|-------------|
| **Set as people folder** | Configure as the default folder for person notes |
| **Import GEDCOM to this folder** | Import a GEDCOM file, creating notes in this folder |
| **Export GEDCOM from this folder** | Export all person notes in this folder to GEDCOM |
| **Scan for relationship issues** | Check all notes in folder for problems |
| **Set as places folder** | Configure as the default folder for place notes |
| **Bases** | |
| → New people base from template | Create an Obsidian Base for managing people |
| → New places base from template | Create an Obsidian Base for managing places |
| **Generate all trees** | Create canvases for all family groups in this folder |
| **Show folder statistics** | Display data quality metrics for this folder |

## Multiple Files

When selecting multiple markdown files, right-click for bulk operations:

| Action | Description |
|--------|-------------|
| **Add essential person properties** | Add missing person properties to all selected files |
| **Add essential place properties** | Add missing place properties to all selected files |

These options only appear if at least one selected file is missing the relevant properties.

## Plain Markdown Files

Right-click on markdown files without Canvas Roots properties:

| Action | Description |
|--------|-------------|
| **Add essential person properties** | Convert to a person note with cr_id, name, etc. |
| **Add essential place properties** | Convert to a place note with required fields |

## Mobile vs Desktop

On **desktop**, context menu items are organized in nested submenus under a "Canvas Roots" parent menu.

On **mobile**, all items appear as a flat list with "Canvas Roots:" prefixes for clarity in the smaller interface.

## Control Center Context Menus

The Control Center includes context menus for quick actions within its various tabs and cards.

### Person List (People Tab)

Right-click on any person in the People tab list:

| Action | Description |
|--------|-------------|
| **Open note** | Open the person's note in the current tab |
| **Open in new tab** | Open the person's note in a new tab |
| **Events** | |
| → Create event for this person | Open Create Event modal with person pre-filled |
| → Export timeline to Canvas | Export all events for this person to a Canvas file |
| → Export timeline to Excalidraw | Export all events for this person to an Excalidraw file |

### Event Timeline (Events Tab)

Right-click on any event row in the Timeline card:

| Action | Description |
|--------|-------------|
| **Open note** | Open the event note in the current tab |
| **Open in new tab** | Open the event note in a new tab |
| **Delete event** | Delete the event note (with confirmation dialog) |

### Source List (Sources Tab)

Right-click on any source row:

| Action | Description |
|--------|-------------|
| **Edit source** | Open the source editing modal |
| **Extract events** | Extract events from this source |
| **Open note** | Open the source note |

## Tips

- **Quick tree generation**: Right-click a person → Generate tree → Generate Canvas tree
- **Bulk property addition**: Select multiple files → right-click → Add essential properties
- **Fast relationship editing**: Right-click a person → Add relationship → choose type
- **Canvas updates**: After editing notes, right-click canvas → Regenerate canvas
- **Quick event creation**: In People tab, right-click a person → Events → Create event for this person
